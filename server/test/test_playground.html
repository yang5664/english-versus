<!DOCTYPE HTML>

<html>
<head>
<title>Playground</title>
    <script type = "text/javascript">
    var ws;
        function WebSocketTest() {

            if ("WebSocket" in window) {
                // alert("WebSocket is supported by your Browser!");

                // Let us open a web socket
                ws = new WebSocket("ws://172.20.10.4:8000/ws");
                // ws = new WebSocket("ws://127.0.0.1:8000/ws");

                ws.onopen = function() {
                    console.log("Connection is connected...");
                };

                ws.onmessage = function (evt) {
                    var received_msg = evt.data;
                    console.log(received_msg);
                    var obj = JSON.parse(received_msg);
                    showLog(obj.message);
                };

                ws.onclose = function() {
                    console.log("Connection is closed...");
                };
            } else {

                // The browser doesn't support WebSocket
                console.log("WebSocket NOT supported by your Browser!");
            }

            function showLog(val){
                var log = document.getElementById("log");
                log.innerHTML += val + " <br/>";
            }

            function setPlayground() {
                ws.send(JSON.stringify({
                    type: "playground",
                    channel: "1",
                    message: ""
                }));
            }
        }
    </script>

</head>

<body>
<div id = "sse">
    Playground <br/>
    <button type="button" style="height:50px;width:100px" onClick="javascript:WebSocketTest();">connect</button>
    <button type="button" style="height:50px;width:100px" onClick="javascript:setPlayground();">setPlayground</button>
    <button type="button" style="height:50px;width:100px" onClick="javascript:ws.close();">disconnect</button>

</div>
<div id= "log">

</div>
</body>
</html>